name: WIN11_SPOOF_BYPASS_SECURITY
on: 
  workflow_dispatch:

jobs:
  deploy:
    runs-on: windows-latest
    timeout-minutes: 360
    steps:
      - name: ðŸŽ­ 1. SPOOFING DE HARDWARE (MODO COMPATIBLE)
        shell: powershell
        run: |
          Write-Host "[*] Aplicando mascara de hardware segura..." -ForegroundColor Cyan

          # 1. CPU SPOOF (Claves de Usuario/DescripciÃ³n)
          $cpuPath = "HKLM:\HARDWARE\DESCRIPTION\System\CentralProcessor"
          try {
              $cores = Get-ChildItem -Path $cpuPath -ErrorAction SilentlyContinue
              foreach ($core in $cores) {
                  Set-ItemProperty -Path $core.PSPath -Name "ProcessorNameString" -Value "AMD Ryzen 9 7950X3D 16-Core Processor" -ErrorAction SilentlyContinue
              }
              Write-Host "[+] CPU modificada visualmente." -ForegroundColor Green
          } catch { Write-Host "[!] Saltando CPU por permisos." }

          # 2. GPU SPOOF (Targeting Directo a Adaptadores de Video)
          # En lugar de recursividad, atacamos la clase de adaptadores de video
          $gpuClass = "HKLM:\SYSTEM\CurrentControlSet\Control\Class\{4d36e968-e325-11ce-bfc1-08002be10318}"
          try {
              Get-ChildItem -Path $gpuClass -ErrorAction SilentlyContinue | ForEach-Object {
                  Set-ItemProperty -Path $_.PSPath -Name "DriverDesc" -Value "NVIDIA GeForce RTX 4090" -ErrorAction SilentlyContinue
                  Set-ItemProperty -Path $_.PSPath -Name "ProviderName" -Value "NVIDIA" -ErrorAction SilentlyContinue
              }
              Write-Host "[+] GPU modificada en la clase de video." -ForegroundColor Green
          } catch { Write-Host "[!] Saltando GPU por proteccion de Azure." }

          # 3. MOTHERBOARD (ASUS)
          Set-ItemProperty -Path "HKLM:\HARDWARE\DESCRIPTION\System\BIOS" -Name "SystemManufacturer" -Value "ASUS" -ErrorAction SilentlyContinue
          Set-ItemProperty -Path "HKLM:\HARDWARE\DESCRIPTION\System\BIOS" -Name "SystemProductName" -Value "ROG CROSSHAIR X670E HERO" -ErrorAction SilentlyContinue

      - name: ðŸ’¾ 2. DISCO 1TB DINAMICO
        shell: powershell
        run: |
          # Usamos un archivo local para no disparar alertas de cuota de disco
          New-VHD -Path "C:\Storage_Disk.vhdx" -SizeBytes 1025GB -Dynamic
          $vhd = Mount-VHD -Path "C:\Storage_Disk.vhdx" -PassThru
          $disk = $vhd | Get-Disk
          Initialize-Disk -Number $disk.Number -PartitionStyle GPT
          $partition = New-Partition -DiskNumber $disk.Number -UseMaximumSize -AssignDriveLetter
          Format-Volume -DriveLetter $partition.DriveLetter -FileSystem NTFS -NewFileSystemLabel "ALMACEN_1TB" -Confirm:$false

      - name: ðŸ”‘ 3. LANZAR RUSTDESK
        shell: powershell
        run: |
          Write-Host "[*] Instalando RustDesk..." -ForegroundColor Cyan
          curl.exe -L -o rd.msi "https://github.com/rustdesk/rustdesk/releases/download/1.3.1/rustdesk-1.3.1-x86_64.msi"
          Start-Process msiexec.exe -ArgumentList "/i rd.msi /quiet /norestart" -Wait
          
          Start-Sleep -Seconds 10
          & "C:\Program Files\RustDesk\rustdesk.exe" --password Bullet123
          
          $id = ""
          for ($i=0; $i -lt 10; $i++) {
              $id = & "C:\Program Files\RustDesk\rustdesk.exe" --get-id
              if ($id) { break }
              Start-Sleep -Seconds 5
          }
          Write-Host "################################################" -ForegroundColor Yellow
          Write-Host "TU ID: $id" -ForegroundColor Green
          Write-Host "CLAVE: Bullet123" -ForegroundColor Green
          Write-Host "################################################" -ForegroundColor Yellow

      - name: ðŸ“¸ 4. CAPTURA A CATBOX
        shell: powershell
        run: |
          Add-Type -AssemblyName System.Windows.Forms
          $screen = [System.Windows.Forms.Screen]::PrimaryScreen.Bounds
          $bitmap = New-Object System.Drawing.Bitmap($screen.Width, $screen.Height)
          $graphics = [System.Drawing.Graphics]::FromImage($bitmap)
          $graphics.CopyFromScreen($screen.Left, $screen.Top, 0, 0, $bitmap.Size)
          $bitmap.Save("C:\Users\Public\screen.png")
          
          $link = curl.exe -F "reqtype=fileupload" -F "fileToUpload=@C:\Users\Public\screen.png" https://catbox.moe/user/api.php
          Write-Host "LINK FOTO: $link" -ForegroundColor Cyan

      - name: ðŸ”„ MANTENER CONEXION
        shell: powershell
        run: |
          while($true) { Start-Sleep -Seconds 60 }
          
